{"version":3,"sources":["App.tsx","reportWebVitals.ts","index.tsx"],"names":["groupTransform","App","useState","width","setWidth","height","setHeight","DOMMatrix","transformationMatrix","setTransformationMatrix","x","y","viewboxStart","setViewboxStart","dragStart","setDragStart","initialViewboxStart","setInitialViewboxStart","readyToRender","setReadyToRender","svgRef","useRef","transformableGroupRef","useEffect","setSize","window","innerWidth","innerHeight","current","createSVGMatrix","addEventListener","onWheel","passive","document","event","preventDefault","scale","deltaY","coords","svgElement","groupElement","point","createSVGPoint","matrixTransform","getScreenCTM","inverse","convertScreenCoordsToSvgCoords","clientX","clientY","translate","transform","createSVGTransform","setMatrix","matrix","className","onContextMenu","onMouseDown","onTouchStart","touches","firstTouch","nativeEvent","onTouchMove","onMouseMove","onMouseUp","ref","viewBox","style","background","a","b","c","d","e","f","fill","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a51f3eaa.chunk.js","sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport \"./App.css\";\n\nconst SCALE_FACTOR = 0.03;\n\ntype Point = {\n  x: number;\n  y: number;\n};\n\nfunction convertScreenCoordsToSvgCoords(\n  x: number,\n  y: number,\n  svgElement: SVGSVGElement,\n  groupElement: SVGGraphicsElement\n) {\n  var point = svgElement.createSVGPoint();  // An SVGPoint SVG DOM object\n  point.x = x;\n  point.y = y;\n  point = point.matrixTransform(groupElement.getScreenCTM()?.inverse());\n  return {\n    x: point.x,\n    y: point.y,\n  };\n}\n\nlet groupTransform: DOMMatrix;\n\nfunction App() {\n  const [width, setWidth] = useState(600);\n  const [height, setHeight] = useState(600);\n  const [transformationMatrix, setTransformationMatrix] = useState<DOMMatrix>(new DOMMatrix());\n  const [viewboxStart, setViewboxStart] = useState<Point>({ x: 0, y: 0 });\n  const [dragStart, setDragStart] = useState<Point>({ x: -1, y: -1 });\n  const [initialViewboxStart, setInitialViewboxStart] = useState<Point>({\n    x: -1,\n    y: -1,\n  });\n  const [readyToRender, setReadyToRender] = useState(false);\n  \n  const svgRef = useRef<SVGSVGElement>(null);\n  const transformableGroupRef = useRef<SVGGraphicsElement>(null);\n  useEffect(() => {\n    setSize();\n    setReadyToRender(true);\n  }, []);\n\n  const setSize = () => {\n    setWidth(window.innerWidth);\n    setHeight(window.innerHeight);\n  };\n\n  useEffect(() => {\n    if (svgRef.current) {\n      groupTransform = svgRef.current.createSVGMatrix();\n      \n      svgRef.current.addEventListener('wheel', onWheel, {\n        passive: false,\n      });\n    }\n\n    window.addEventListener('resize', () => {\n      setSize();\n    });\n\n    document.addEventListener('gesturestart', (event) => {\n      event.preventDefault();\n      \n    });\n    document.addEventListener('gesturechange', (event) => {\n      event.preventDefault();\n      \n    });\n    document.addEventListener('gestureend', (event) => {\n      event.preventDefault();\n      \n    });\n    document.addEventListener('DOMMouseScroll', (event) => {\n      event.preventDefault();\n    });\n  }, [readyToRender]);\n\n  const onWheel = (event: any) => {\n    if (!svgRef.current || !transformableGroupRef.current) {\n      return;\n    }\n    event.preventDefault();\n    const scale = event.deltaY * SCALE_FACTOR * -1;\n    var coords = convertScreenCoordsToSvgCoords(\n      event.clientX,\n      event.clientY,\n      svgRef.current,\n      transformableGroupRef.current);\n\n    groupTransform = groupTransform.translate(coords.x, coords.y);\n    groupTransform = groupTransform.scale(1 + scale);\n    groupTransform = groupTransform.translate(-coords.x, -coords.y);\n\n    const transform = svgRef.current.createSVGTransform();\n    transform.setMatrix(groupTransform);\n    setTransformationMatrix(transform.matrix);\n  };\n  return (\n    <div className=\"container\">\n      {readyToRender && (\n        <svg\n        onContextMenu={(event) => event.preventDefault()}\n        onMouseDown={(event) => {\n          setDragStart({ x: event.clientX, y: event.clientY });\n          setInitialViewboxStart(viewboxStart);\n        }}\n        onTouchStart={({ touches, nativeEvent }) => {\n          const firstTouch = touches[0];\n          setDragStart({ x: firstTouch.clientX, y: firstTouch.clientY });\n          setInitialViewboxStart(viewboxStart);\n        }}\n        onTouchMove={({ touches }) => {\n          if (dragStart.x > -1 && dragStart.y > -1) {\n            const firstTouch = touches[0];\n            \n            setViewboxStart({\n              x: initialViewboxStart.x + (firstTouch.clientX - dragStart.x) * -1,\n              y: initialViewboxStart.y + (firstTouch.clientY - dragStart.y) * -1,\n            });\n          }\n        }}\n        onMouseMove={(event) => {\n          if (dragStart.x > -1 && dragStart.y > -1) {\n            setViewboxStart({\n              x: initialViewboxStart.x + (dragStart.x - event.clientX),\n              y: initialViewboxStart.y + (dragStart.y - event.clientY),\n            });\n          }\n        }}\n        onMouseUp={() => {\n          if (dragStart.x > -1 && dragStart.y > -1) {\n            setDragStart({\n              x: -1,\n              y: -1,\n            });\n          }\n        }}\n        width={width}\n        ref={svgRef}\n        height={height}\n        viewBox={`${viewboxStart.x} ${viewboxStart.y} ${width} ${height}`}\n        style={{\n          background: \"snow\",\n        }}\n      >\n        <g\n          transform={\n            `matrix(\n              ${transformationMatrix.a},\n              ${transformationMatrix.b},\n              ${transformationMatrix.c},\n              ${transformationMatrix.d},\n              ${transformationMatrix.e},\n              ${transformationMatrix.f}\n            )`\n          }\n          ref={transformableGroupRef}\n        >\n          <rect width={width-700} fill=\"rgb(40, 40, 40)\" height={height-200} x={100} y={100} />\n          <rect width={300} fill=\"rgb(40, 40, 40)\" height={250} x={width-500} y={100} />\n        </g>\n      </svg>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}